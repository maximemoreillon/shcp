<!-- views/index.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
  <% include partials/head %>

  <!-- Additional stylesheets -->
  <!-- <link rel="stylesheet" type="text/css" href="css/show_devices.css"> -->

</head>
<body>

  <div class="wrapper">

    <header>
      <% include partials/header %>
    </header>

    <main>
      <div class="floorplan_wrapper_outer">
        <div id="floorplan_wrapper" class="floorplan_wrapper">
          <img id="floorplan" class="floorplan" src="images/floorplan/floorplan.svg">

          <!-- Image of the new device -->
          <img id="new_device_image" class="device_image" src="images/devices/light_off.svg">

          <!-- The modal for the new device -->
          <div id="device_modal" class="device_modal">
            <div class="device_modal_inner"> <!-- No idea why this div is needed -->

              Add / Edit device<br><br>

              <!-- Select type of device -->
              <!-- This will decide what info is relevant to ask -->
              <select id="type_select" name="type">
                <option value="" selected disabled hidden>Type</option>

                <!-- MQTT devices -->
                <option value="light">Light</option>
                <option value="lock">Lock</option>
                <option value="fan">Fan</option>
                <option value="heater">Heater</option>
                <option value="switch">Generic switch</option>

                <option value="temperature">Temperature sensor</option>
                <option value="humidity">Humidity sensor</option>
                <option value="power">Power monitor</option>
                <option value="sensor">Generic sensor</option>

                <!-- Non MQTT devices -->
                <option value="other">Other</option>

              </select><br>

              <!-- Info common to all devices -->
              <input type="hidden" id="id_input" name="id" >
              <input type="hidden" id="position_x_input" name="position_x">
              <input type="hidden" id="position_y_input" name="position_y">


              <div id="specific_data_inputs">
                <!-- MQTT info -->
                <input class="specific_input" type="text" id="status_topic_input" name="status_topic" placeholder="Status topic"><br>
                <input class="specific_input" type="text" id="command_topic_input" name="command_topic" placeholder="Command topic"><br>
                <input class="specific_input" type="text" id="payload_on_input" name="payload_on" placeholder="Payload ON"><br>
                <input class="specific_input" type="text" id="payload_off_input" name="payload_off" placeholder="Payload OFF"><br>
              </div>

              <!-- Buttons -->
              <input type="button" id="add_button" value="Create" onclick="add_device_ws()">
              <input type="button" id="submit_button" value="Submit" onclick="edit_device_ws()">
              <input type="button" id="delete_button" value="Delete" onclick="delete_device_ws()">
              <input type="button" id="cancel_button" value="Cancel" onclick="close_modal()">

            </div>
          </div>

        </div> <!-- end of floorplan wrapper -->
      </div> <!-- end of floorplan wrapper outer -->

      <div class="controls">
        <img class="control" id="toggle_edit_button" src="images/icons/pencil.svg" onclick="toggle_edit_mode(this)">
      </div>

    </main>

    <footer>
      <% include partials/footer %>
    </footer>

  </div> <!-- End of wrapper -->

  <!-- Modals -->
  <!-- Modal for connection -->
  <div id="disconnected_modal" class="modal_wrapper">
    <div class="modal_container">
      NO CONNECTION
    </div>
  </div>

  <!-- Sensor info modal -->
  <div id="sensor_info_modal" class="modal_wrapper">
    <div class="modal_container">
      <i class="fas fa-times modal_close_button" onclick="close_this_modal('sensor_info_modal')"></i>
      Sensor info
      <div id="sensor_info">
      </div>
    </div>
  </div>

  <!-- JS -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.3/socket.io.js"></script>
  <script src="js/modals.js"></script>
  <script src="js/polyfill.js"></script>
  <script src="js/devices_icons.js"></script>
  <script src="js/misc.js"></script>
  <script src="js/handle_inbound_ws.js"></script>
  <script src="js/handle_outbound_ws.js"></script>


</body>
</html>
